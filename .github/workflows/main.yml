name: Sync to openapi repos

on:
  workflow_dispatch: {}
  push:
    branches:
      - main

jobs:
  copy-file:
    name: apiserver - sync to openapi repos
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
          
          
      - name: Push files to another repository
        if: github.ref == 'refs/heads/main'
        uses: nkoppel/push-files-to-another-repository@1.1.0
        env:
          API_TOKEN_GITHUB: ${{ secrets.API_TOKEN_GITHUB }}
        with:
          source-files: 'source.txt'
          destination-username: 'ashutosh-yb'
          destination-repository: 'repo2'
          destination-directory: 'dir/'
          destination-branch: 'refs/heads/main'
          commit-email: 'aanshu@yugabyte.com'
          
